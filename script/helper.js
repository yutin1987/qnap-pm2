var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){for(var t,n,o,r,a,i,s="",u=0,e=Base64._utf8_encode(e);e.length>u;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),o=e.charCodeAt(u++),r=t>>2,t=(3&t)<<4|n>>4,a=(15&n)<<2|o>>6,i=63&o,isNaN(n)?a=i=64:isNaN(o)&&(i=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(t)+this._keyStr.charAt(a)+this._keyStr.charAt(i);return s},decode:function(e){for(var t,n,o,r,a,i="",s=0,e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");e.length>s;)t=this._keyStr.indexOf(e.charAt(s++)),n=this._keyStr.indexOf(e.charAt(s++)),r=this._keyStr.indexOf(e.charAt(s++)),a=this._keyStr.indexOf(e.charAt(s++)),t=t<<2|n>>4,n=(15&n)<<4|r>>2,o=(3&r)<<6|a,i+=String.fromCharCode(t),64!=r&&(i+=String.fromCharCode(n)),64!=a&&(i+=String.fromCharCode(o));return i=Base64._utf8_decode(i)},_utf8_encode:function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",n=0;e.length>n;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):(o>127&&2048>o?t+=String.fromCharCode(192|o>>6):(t+=String.fromCharCode(224|o>>12),t+=String.fromCharCode(128|63&o>>6)),t+=String.fromCharCode(128|63&o))}return t},_utf8_decode:function(e){for(var t="",n=0,o=c1=c2=0;e.length>n;)o=e.charCodeAt(n),128>o?(t+=String.fromCharCode(o),n++):o>191&&224>o?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),n+=3);return t}};(function(){Date.format=function(e,t){var n=Date.formatLogic,o=-1!==t.indexOf("a")||-1!==t.indexOf("A"),r=[];r.d=e.getDate(),r.dd=n.pad(r.d,2),r.ddd=n.i18n.shortDayNames[e.getDay()],r.dddd=n.i18n.dayNames[e.getDay()],r.M=e.getMonth()+1,r.MM=n.pad(r.M,2),r.MMM=n.i18n.shortMonthNames[r.M-1],r.MMMM=n.i18n.monthNames[r.M-1],r.yyyy=e.getFullYear(),r.yyy=n.pad(r.yyyy,2)+"y",r.yy=n.pad(r.yyyy,2),r.y="y",r.H=e.getHours(),r.hh=n.pad(o?n.convertTo12Hour(r.H):r.H,2),r.h=o?n.convertTo12Hour(r.H):r.H,r.HH=n.pad(r.H,2),r.m=e.getMinutes(),r.mm=n.pad(r.m,2),r.s=e.getSeconds(),r.ss=n.pad(r.s,2),r.z=e.getMilliseconds(),r.zz=r.z+"z",r.zzz=n.pad(r.z,3),r.ap=12>r.H?"am":"pm",r.a=12>r.H?"am":"pm",r.AP=12>r.H?"AM":"PM",r.A=12>r.H?"AM":"PM";for(var a=0,i="",s="";t.length>a;){for(s=t.charAt(a);t.length>a+1&&void 0!==r[s+t.charAt(a+1)];)s+=t.charAt(++a);i+=void 0!==r[s]?r[s]:s,a++}return i},Date.formatLogic={pad:function(e,t){var n=1,o="";if(1>t)return"";for(var r=0;t>r;r++)n*=10,o+="0";var a=e;return a=o+e,a=a.substring(a.length-t)},convertTo12Hour:function(e){return 0===e%12?12:e%12},i18n:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},Date.prototype.toFormat=function(e){return Date.format(this,e)},Date.parseFormat=function(e,t){var n=new Date(2e3,0,1),o=[];o.d="([0-9][0-9]?)",o.dd="([0-9][0-9])",o.M="([0-9][0-9]?)",o.MM="([0-9][0-9])",o.yyyy="([0-9][0-9][0-9][0-9])",o.yyy="([0-9][0-9])[y]",o.yy="([0-9][0-9])",o.H="([0-9][0-9]?)",o.hh="([0-9][0-9])",o.h="([0-9][0-9]?)",o.HH="([0-9][0-9])",o.m="([0-9][0-9]?)",o.mm="([0-9][0-9])",o.s="([0-9][0-9]?)",o.ss="([0-9][0-9])",o.z="([0-9][0-9]?[0-9]?)",o.zz="([0-9][0-9]?[0-9]?)[z]",o.zzz="([0-9][0-9][0-9])",o.ap="([ap][m])",o.a="([ap][m])",o.AP="([AP][M])",o.A="([AP][M])";for(var r=Date.parseLogic,a=0,i="",s=Array(""),u="";t.length>a;){for(u=t.charAt(a);t.length>a+1&&void 0!==o[u+t.charAt(a+1)];)u+=t.charAt(++a);void 0!==o[u]?(i+=o[u],s[s.length]=u):i+=u,a++}var l=RegExp(i),c=e.match(l);if(void 0===c||c.length!==s.length)return void 0;for(a=0;s.length>a;a++)if(""!==s[a])switch(s[a]){case"yyyy":case"yyy":n.setYear(r.parseInt(c[a]));break;case"yy":n.setYear(2e3+r.parseInt(c[a]));break;case"MM":case"M":n.setMonth(r.parseInt(c[a])-1);break;case"dd":case"d":n.setDate(r.parseInt(c[a]));break;case"hh":case"h":case"HH":case"H":n.setHours(r.parseInt(c[a]));break;case"mm":case"m":n.setMinutes(r.parseInt(c[a]));break;case"ss":case"s":n.setSeconds(r.parseInt(c[a]));break;case"zzz":case"zz":case"z":n.setMilliseconds(r.parseInt(c[a]));break;case"AP":case"A":case"ap":case"a":("PM"===c[a]||"pm"===c[a])&&12>n.getHours()&&n.setHours(n.getHours()+12),"AM"!==c[a]&&"am"!==c[a]||12!==n.getHours()||n.setHours(0)}return n},Date.parseLogic={unpad:function(e){for(var t=e;t.length>1&&"0"===t[0];)t=t.substring(1,t.length);return t},parseInt:function(e){return parseInt(this.unpad(e),10)}},Date.prototype.fromFormat=function(e,t){return this.setTime(Date.parseFormat(e,t).getTime()),this}})(),Math.angle=function(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI},Math.distance=function(e,t){var n,o;return n=t.x-e.x,o=t.y-e.y,Math.sqrt(n*n+o*o)},Math.course=function(e,t){var n,o;return o=Math.distance(e,t),n=Math.ceil(Math.angle(e,t)/30),{up:o>70&&(-3===n||-4===n)?!0:!1,down:o>70&&(3===n||4===n)?!0:!1,left:o>70&&(6===n||-6===n)?!0:!1,right:o>70&&(1===n||-1===n)?!0:!1}},$.touch=function(e){var t,n,o,r,a,i;for(e=e.originalEvent.changedTouches||e.originalEvent.touches,r=[],t={x:0,y:0},a=0,i=e.length;i>a;a++)o=e[a],n={x:o.pageX,y:o.pageY},r.push(n),t.x+=n.x,t.y+=n.y;return t.x/=e.length||1,t.y/=e.length||1,{touchs:r,center:t,length:r.length}};